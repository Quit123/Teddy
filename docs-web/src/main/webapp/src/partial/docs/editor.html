<!--ng-controller="ImageEditor"-->

<style>
  body {
    overflow: auto; /* âœ… å¯ç”¨æ»šåŠ¨ */
    margin: 0;
    padding: 0;
  }

  #image-wrapper {
    transform-origin: center center;
    transition: transform 0.2s ease;
    max-width: 100vw;
    max-height: 100vh;
    overflow: hidden;
  }

  #editor-img {
    display: block;
    max-width: 100%;
    height: auto;
  }
</style>

<div class="container" style="position: relative;">
    <h1 class="text-danger">Editor é¡µé¢å·²åŠ è½½</h1>
    <!-- å¤–å±‚å®¹å™¨ï¼Œæ§åˆ¶ç¼©æ”¾å’Œæ»šåŠ¨ -->
    <div id="editor-container"
         style="max-width: 100vw; max-height: 100vh; overflow: auto; display: flex; justify-content: center;">
        <!-- ä¸­é—´å®¹å™¨è´Ÿè´£æ—‹è½¬ -->
        <div id="image-rotator" style="display: inline-block; transition: transform 0.3s ease;">
            <div id="image-wrapper" style="position: relative; display: inline-block;">
                <img id="editor-img"
                     ng-attr-src="../api/file/{{fileId}}/data?size=web"
                     style="max-width: 100%; display: block;">
                <canvas id="draw-layer"
                        style="position:absolute; left:0; top:0; cursor:crosshair;"></canvas>
            </div>
        </div>
    </div>

    <!-- â˜… å·¥å…·æ  -->
    <div id="editor-toolbar" style="position: fixed; right: 20px; top: 120px; display: flex; flex-direction: column; gap: 10px;">
        <button class="btn btn-info" ng-click="enterCropMode()">âœ‚ï¸ å¼€å§‹å‰ªè£</button>
        <button class="btn btn-default" ng-click="rotate(-90)">â†º å‘å·¦æ—‹è½¬</button>
        <button class="btn btn-default" ng-click="rotate(90)">â†» å‘å³æ—‹è½¬</button>
        <button class="btn btn-danger" ng-click="confirmCrop()">âœ… ä¿å­˜å‰ªè£</button>
<!--        <button class="btn btn-danger" ng-click="confirmRotation()">âœ… ä¿å­˜æ—‹è½¬&å‰ªè£</button>-->
        <button class="btn btn-default" ng-click="toggleSharpen()">âœ¨ é”åŒ–</button>
        <button class="btn btn-default" ng-click="toggleDraw()">âœï¸ ç”»ç¬”</button>
        <button class="btn btn-warning" ng-click="undoDraw()">ğŸ—‘ï¸ æ’¤é”€</button>
        <button class="btn btn-primary" ng-click="saveDraw()">ğŸ’¾ ä¿å­˜æ¶‚é¸¦</button>
        <button class="btn btn-success mt-2" ng-click="cropAndUpload()">ä¿å­˜</button>
    </div>
</div>

<!--<div class="container">-->
<!--    <h1 class="text-danger">Editor é¡µé¢å·²åŠ è½½</h1>-->

<!--    <img id="editor-img"-->
<!--         ng-attr-src="../api/file/{{fileId}}/data?size=web"-->
<!--         style="max-width:100%;">-->

<!--    <br/>-->
<!--    <button class="btn btn-success" ng-click="cropAndUpload()">ä¿å­˜</button>-->
<!--</div>-->

